"use strict";var Ee=Object.create;var B=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var $e=Object.getOwnPropertyNames;var Re=Object.getPrototypeOf,ke=Object.prototype.hasOwnProperty;var Ae=(e,t)=>{for(var r in t)B(e,r,{get:t[r],enumerable:!0})},te=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of $e(t))!ke.call(e,a)&&a!==r&&B(e,a,{get:()=>t[a],enumerable:!(o=Fe(t,a))||o.enumerable});return e};var d=(e,t,r)=>(r=e!=null?Ee(Re(e)):{},te(t||!e||!e.__esModule?B(r,"default",{value:e,enumerable:!0}):r,e)),Be=e=>te(B({},"__esModule",{value:!0}),e);var ct={};Ae(ct,{activate:()=>it,deactivate:()=>lt});module.exports=Be(ct);var f=d(require("vscode"));var T=d(require("fs")),oe=require("child_process"),W=null;function We(){switch(process.platform){case"darwin":return"macos";case"win32":return"windows";default:return"linux"}}function Me(){try{return T.readFileSync("/proc/version","utf-8")}catch{return null}}function ae(e){return e?/microsoft/i.test(e):!1}function Ne(e){return!e||!ae(e)?null:/microsoft-standard-WSL2/i.test(e)?2:1}function De(){return T.existsSync("/mnt/wslg/")}function _e(e,t){if(e!=="linux")return"unknown";if(t)return process.env.WAYLAND_DISPLAY?"wayland":process.env.DISPLAY?"x11":"unknown";let r=process.env.XDG_SESSION_TYPE;return r==="wayland"?"wayland":r==="x11"?"x11":process.env.WAYLAND_DISPLAY?"wayland":"unknown"}function re(e){try{return(0,oe.execFileSync)("command",["-v",e],{encoding:"utf-8",timeout:5e3,shell:!0}).trim()||null}catch{return null}}function Oe(e,t){if(e==="windows")return"powershell.exe";if(t){let r=["/mnt/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe","/mnt/c/Program Files/PowerShell/7/pwsh.exe"];for(let a of r)if(T.existsSync(a))return a;let o=re("powershell.exe")??re("pwsh.exe");return o||"powershell.exe"}return null}function ne(){if(W)return W;let e=We(),t=e==="linux"?Me():null,r=e==="linux"?ae(t):!1,o=r?Ne(t):null,a=r?De():!1,n=_e(e,r),i=Oe(e,r);return W={os:e,isWSL:r,wslVersion:o,hasWslg:a,displayServer:n,powershellPath:i},W}var se=d(require("vscode"));function ie(){let e=se.env.remoteName;return e?{remote:!0,type:e}:{remote:!1}}var E=require("child_process"),q=1e4,Le=10*1024*1024,le=50*1024*1024;function U(e){return"code"in e&&typeof e.code=="number"?e.code:e.code??"unknown"}function m(e,t,r){return new Promise((o,a)=>{(0,E.execFile)(e,t,{encoding:"utf-8",timeout:r?.timeout??q,maxBuffer:r?.maxBuffer??Le,cwd:r?.cwd},(n,i,s)=>{if(n){a(new Error(`Command "${e}" failed (exit code ${U(n)}): ${s||n.message}`));return}o({stdout:i,stderr:s})})})}function u(e,t,r){return r?.input?Ge(e,t,r):new Promise((o,a)=>{(0,E.execFile)(e,t,{encoding:"buffer",timeout:r?.timeout??q,maxBuffer:r?.maxBuffer??le,cwd:r?.cwd},(n,i,s)=>{let c=s instanceof Buffer?s.toString("utf-8"):String(s);if(n){a(new Error(`Command "${e}" failed (exit code ${U(n)}): ${c||n.message}`));return}o({stdout:i,stderr:c})})})}function Ge(e,t,r){let o=r.timeout??q,a=r.maxBuffer??le;return new Promise((n,i)=>{let s=(0,E.spawn)(e,t,{stdio:["pipe","pipe","pipe"],cwd:r.cwd}),c=[],h=[],G=0,j=0,g=!1,C=setTimeout(()=>{g||(g=!0,s.kill("SIGTERM"),i(new Error(`Command "${e}" failed (exit code ETIMEDOUT): timed out after ${o}ms`)))},o);s.stdout.on("data",p=>{if(G+=p.length,G>a){g||(g=!0,clearTimeout(C),s.kill("SIGTERM"),i(new Error(`Command "${e}" failed (exit code ERR_CHILD_PROCESS_STDIO_MAXBUFFER): stdout maxBuffer length exceeded`)));return}c.push(p)}),s.stderr.on("data",p=>{j+=p.length,j<=a&&h.push(p)}),s.on("error",p=>{g||(g=!0,clearTimeout(C),i(new Error(`Command "${e}" failed (exit code ${U(p)}): ${p.message}`)))}),s.on("close",p=>{if(g)return;g=!0,clearTimeout(C);let I=Buffer.concat(h).toString("utf-8");if(p!==0){i(new Error(`Command "${e}" failed (exit code ${p??"unknown"}): ${I||`process exited with code ${p}`}`));return}n({stdout:Buffer.concat(c),stderr:I})}),s.stdin.on("error",()=>{}),s.stdin.end(r.input)})}var de=require("child_process");var ce=d(require("vscode"));function Y(){let e=new Date,t=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0"),a=String(e.getMilliseconds()).padStart(3,"0");return`[${t}:${r}:${o}.${a}]`}function je(e){let t=ce.window.createOutputChannel(e);return{info(r){t.appendLine(`${Y()} [INFO] ${r}`)},warn(r,o){let a=`${Y()} [WARN] ${r}`;o!==void 0&&(o instanceof Error&&o.stack?a+=`
${o.stack}`:a+=`
${String(o)}`),t.appendLine(a)},error(r,o){let a=`${Y()} [ERROR] ${r}`;o!==void 0&&(o instanceof Error&&o.stack?a+=`
${o.stack}`:a+=`
${String(o)}`),t.appendLine(a)},show(){t.show()}}}var l=je("Terminal Image Paste");var me=new Map,qe=process.platform==="win32";async function Ue(e){let t=me.get(e);if(t!==void 0)return t;let r=qe?"where":"which";try{let o=await new Promise((a,n)=>{(0,de.execFile)(r,[e],{timeout:5e3},(i,s)=>{if(i){n(i);return}let c=s.trim().split(/\r?\n/)[0];a(c)})});return me.set(e,o),o}catch{l.warn(`Could not resolve absolute path for "${e}" \u2014 using bare name`);return}}async function S(e){return await Ue(e)??e}async function F(){let{stdout:e}=await m("osascript",["-e","clipboard info"]);return e}function $(e){let t=[];return e.includes("\xABclass PNGf\xBB")&&t.push("png"),(e.includes("\xABclass JPEG\xBB")||e.includes("\xABclass JPEf\xBB"))&&t.push("jpeg"),e.includes("\xABclass TIFF\xBB")&&t.push("tiff"),(e.includes("\xABclass BMP \xBB")||e.includes("\xABclass BMPf\xBB"))&&t.push("bmp"),t}var M=class{resolvedPngpastePath;async getPngpastePath(){return this.resolvedPngpastePath===void 0&&(this.resolvedPngpastePath=await S("pngpaste")),this.resolvedPngpastePath}requiredTool(){return"pngpaste"}async isToolAvailable(){try{return await m("which",["pngpaste"]),!0}catch{return!1}}async hasImage(){try{let t=await F();return $(t).length>0}catch{return!1}}async detectFormat(){let t=await F(),r=$(t);if(r.length>0)return r[0];throw new Error("No image found in clipboard")}async readImage(){if(!await this.hasImage())throw new Error("No image found in clipboard");let r=await this.getPngpastePath(),{stdout:o}=await u(r,["-"]);return{data:o,format:"png"}}};var pe={png:"PNGf",jpeg:"JPEG",tiff:"TIFF"},N=class{requiredTool(){return"osascript (built-in)"}async isToolAvailable(){return process.platform==="darwin"}async hasImage(){try{let t=await F();return $(t).length>0}catch{return!1}}async detectFormat(){let t=await F(),r=$(t);if(r.length>0)return r[0];throw new Error("No image found in clipboard")}async readImage(){let t=await this.detectFormat(),r=t in pe,o=r?pe[t]:"PNGf",a=r?t:"png",{stdout:n}=await u("osascript",["-e",`set imgData to (the clipboard as \xABclass ${o}\xBB)`,"-e","return imgData"]);return{data:n,format:a}}};var fe=[["image/png","png"],["image/jpeg","jpeg"],["image/webp","webp"],["image/tiff","tiff"],["image/bmp","bmp"],["image/x-bmp","bmp"]];function Ye(e){for(let[t,r]of fe)if(e.includes(t))return r;return/^image\//m.test(e)?"unknown":null}function Je(e){for(let[t,r]of fe)if(e.includes(t))return{mime:t,format:r};return/^image\//m.test(e)?{mime:"image/png",format:"unknown"}:null}var v=class{displayServer;resolvedToolPath;constructor(t){this.displayServer=t}isWayland(){return this.displayServer==="wayland"}toolName(){return this.isWayland()?"wl-paste":"xclip"}async getToolPath(){return this.resolvedToolPath===void 0&&(this.resolvedToolPath=await S(this.toolName())),this.resolvedToolPath}requiredTool(){return this.isWayland()?"wl-clipboard (wl-paste)":"xclip"}async isToolAvailable(){try{return this.isWayland()?await m("which",["wl-paste"]):await m("which",["xclip"]),!0}catch{return!1}}async getClipboardTypes(){let t=await this.getToolPath();if(this.isWayland()){let{stdout:r}=await m(t,["--list-types"]);return r}else{let{stdout:r}=await m(t,["-selection","clipboard","-t","TARGETS","-o"]);return r}}async hasImage(){try{let t=await this.getClipboardTypes();return/^image\//m.test(t)}catch{return!1}}async detectFormat(){let t=await this.getClipboardTypes(),r=Ye(t);if(r!==null)return r;throw new Error("No image found in clipboard")}async readImage(){let t=await this.getClipboardTypes(),r=Je(t);if(!r)throw new Error("No image found in clipboard");let{mime:o,format:a}=r,n=a==="unknown"?"png":a,i=await this.getToolPath(),{stdout:s}=this.isWayland()?await u(i,["--type",o]):await u(i,["-selection","clipboard","-t",o,"-o"]);return{data:s,format:n}}};var J=d(require("fs"));function b(e){return Buffer.from(e,"utf16le").toString("base64")}var He="Add-Type -AssemblyName System.Windows.Forms; if ([System.Windows.Forms.Clipboard]::ContainsImage()) { echo 'yes' } else { echo 'no' }",H="Add-Type -AssemblyName System.Windows.Forms; $img = [System.Windows.Forms.Clipboard]::GetImage(); if ($img -eq $null) { exit 1 }; $tmp = [System.IO.Path]::GetTempFileName(); $img.Save($tmp, [System.Drawing.Imaging.ImageFormat]::Png); Write-Output $tmp",x=class{async isToolAvailable(){try{return await m(this.powershellExe,["-Command","echo ok"]),!0}catch{return!1}}async hasImage(){try{return(await m(this.powershellExe,["-EncodedCommand",b(He)])).stdout.trim()==="yes"}catch{return!1}}async detectFormat(){if(!await this.hasImage())throw new Error("No image found in clipboard");return"png"}async readImage(){if(!await this.hasImage())throw new Error("No image found in clipboard");let r=await m(this.powershellExe,["-EncodedCommand",b(H)]),o=await this.resolveTempPath(r.stdout.trim());try{return{data:await J.promises.readFile(o),format:"png"}}finally{J.promises.unlink(o).catch(a=>{l.warn(`Failed to clean up temp file: ${o}`,a)})}}};var D=class extends x{resolvedPsPath;get powershellExe(){return this.resolvedPsPath??"powershell.exe"}async resolvePs(){this.resolvedPsPath===void 0&&(this.resolvedPsPath=await S("powershell.exe"))}requiredTool(){return"PowerShell (built-in)"}async isToolAvailable(){return await this.resolvePs(),super.isToolAvailable()}async resolveTempPath(t){return t}};var X=d(require("fs"));var R=class extends x{psPath;constructor(t){super(),this.psPath=t.powershellPath??"powershell.exe"}get powershellExe(){return this.psPath}requiredTool(){return"PowerShell (via WSL interop)"}async resolveTempPath(t){try{return(await m("wslpath",["-u",t])).stdout.trim()}catch(r){throw new Error(`wslpath conversion failed: could not convert "${t}" to a WSL path: ${r instanceof Error?r.message:r}`)}}async readImage(){if(!await this.hasImage())throw new Error("No image found in clipboard");let r;try{r=(await m(this.powershellExe,["-EncodedCommand",b(H)])).stdout.trim()}catch(a){throw new Error(`PowerShell execution failed: ${a instanceof Error?a.message:a}`)}let o=await this.resolveTempPath(r);try{return{data:await X.promises.readFile(o),format:"png"}}catch(a){throw new Error(`Temp file read failed: could not read "${o}": ${a instanceof Error?a.message:a}`)}finally{X.promises.unlink(o).catch(a=>{l.warn(`Failed to clean up temp file: ${o}`,a)})}}};var y=class{readers;constructor(t){if(t.length===0)throw new Error("FallbackClipboardReader requires at least one reader");this.readers=t}requiredTool(){return this.readers.map(t=>t.requiredTool()).join(" or ")}async isToolAvailable(){for(let t of this.readers)if(await t.isToolAvailable())return!0;return!1}async hasImage(){for(let t of this.readers)try{if(await t.hasImage())return!0}catch{continue}return!1}async detectFormat(){let t=[];for(let r of this.readers)try{return await r.detectFormat()}catch(o){t.push(o instanceof Error?o:new Error(String(o)))}throw new AggregateError(t,`All clipboard readers failed to detect format: ${t.map(r=>r.message).join("; ")}`)}async readImage(){let t=[];for(let r of this.readers)try{if(!await r.isToolAvailable()){t.push(new Error(`${r.requiredTool()}: tool not available`));continue}return await r.readImage()}catch(o){t.push(o instanceof Error?o:new Error(String(o)))}throw new AggregateError(t,`All clipboard readers failed: ${t.map(r=>r.message).join("; ")}`)}};function ue(e){if(e.isWSL){let t=e.displayServer==="x11"||e.displayServer==="wayland";if(e.hasWslg&&t)return new y([new v(e.displayServer),new R(e)]);let r=[new R(e)];return t&&r.push(new v(e.displayServer)),r.length===1?r[0]:new y(r)}switch(e.os){case"macos":return new y([new M,new N]);case"windows":return new D;case"linux":{let t=new v(e.displayServer),r=e.displayServer==="wayland"?"x11":"wayland",o=new v(r);return new y([t,o])}}}var w=d(require("fs")),P=d(require("path")),k=d(require("vscode"));var ge=d(require("fs"));async function _(e,t){await ge.promises.writeFile(e,t,{mode:384})}var Xe=".tip-images",ze=[".png",".jpg",".jpeg",".tiff",".bmp",".webp"];function Ve(e){switch(e){case"jpeg":return".jpg";case"tiff":return".tiff";case"bmp":return".bmp";case"webp":return".webp";case"png":case"unknown":default:return".png"}}var z=Buffer.from([137,80,78,71,13,10,26,10]);function Ke(e,t){switch(t){case"png":if(e.length<z.length||!e.subarray(0,z.length).equals(z))throw new Error("Clipboard data is not a valid PNG image");break;case"jpeg":if(e.length<2||e[0]!==255||e[1]!==216)throw new Error("Clipboard data is not a valid JPEG image");break;case"bmp":if(e.length<2||e[0]!==66||e[1]!==77)throw new Error("Clipboard data is not a valid BMP image");break;case"webp":if(e.length<12||e.subarray(0,4).toString("ascii")!=="RIFF"||e.subarray(8,12).toString("ascii")!=="WEBP")throw new Error("Clipboard data is not a valid WebP image");break;case"tiff":if(e.length<2||!(e[0]===73&&e[1]===73||e[0]===77&&e[1]===77))throw new Error("Clipboard data is not a valid TIFF image");break;case"unknown":l.warn("Skipping image validation for unknown format");break}}function V(){return k.workspace.getConfiguration("terminalImgPaste")}function K(){let e=k.workspace.workspaceFolders;if(!e||e.length===0)throw k.window.showErrorMessage("Terminal Image Paste: No workspace folder is open. Please open a folder first."),new Error("No workspace folder is open");return e[0].uri.fsPath}function Pe(){return V().get("folderName",Xe)}function he(){let e=K(),t=Pe(),r=P.resolve(e,t);if(!r.startsWith(e+P.sep))throw new Error(`Configured folderName "${t}" must resolve to a subdirectory of the workspace root`);return r}function Qe(e){let t=new Date,r=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),c=String(t.getMilliseconds()).padStart(3,"0"),h=Ve(e);return`img-${r}-${o}-${a}T${n}-${i}-${s}-${c}${h}`}async function we(e,t){let r=await w.promises.realpath(e),o=await w.promises.realpath(t),a=process.platform==="win32"||process.platform==="darwin",n=a?r.toLowerCase():r,i=a?o.toLowerCase():o;if(n!==i&&!n.startsWith(i+P.sep))throw new Error(`Image folder resolves to a path outside the workspace (possible symlink escape): ${r}`);return r}function ve(){return{async save(e,t="png"){Ke(e,t);let r=he(),o=K();await w.promises.mkdir(r,{recursive:!0}),await we(r,o);let a=Qe(t),n=P.join(r,a);return await _(n,e),await we(n,o),l.info(`Saved image: ${n}`),await this.cleanup(),await this.ensureGitIgnored(),n},async cleanup(){let t=V().get("maxImages",20),r=Number.isInteger(t)&&t>0?t:20,o=he(),a;try{a=await w.promises.readdir(o)}catch{return}let n=a.filter(s=>ze.some(c=>s.endsWith(c))).sort();if(n.length<=r)return;let i=n.slice(0,n.length-r);for(let s of i){let c=P.join(o,s);try{await w.promises.unlink(c),l.info(`Deleted old image: ${c}`)}catch(h){l.warn(`Failed to delete old image: ${c}`,h)}}},async ensureGitIgnored(){if(!V().get("autoGitIgnore",!0))return;let t=Pe(),r=K(),o=P.join(r,".gitignore"),a;try{a=await w.promises.readFile(o,"utf-8")}catch{await w.promises.writeFile(o,t+`
`,"utf-8"),l.info(`Created .gitignore with ${t}`);return}if(a.split(`
`).map(s=>s.trim()).includes(t))return;let i=a.endsWith(`
`)?"":`
`;await w.promises.writeFile(o,a+i+t+`
`,"utf-8"),l.info(`Added ${t} to .gitignore`)}}}var A=d(require("vscode"));var ye=d(require("path")),Ze=[{pattern:/\bbash\b/i,type:"bash"},{pattern:/\bzsh\b/i,type:"zsh"},{pattern:/\bfish\b/i,type:"fish"},{pattern:/\b(?:pwsh|powershell)\b/i,type:"powershell"},{pattern:/\bcmd\b/i,type:"cmd"}];function be(e){let t=ye.basename(e).replace(/\.exe$/i,"");for(let{pattern:r,type:o}of Ze)if(r.test(t))return o;return"unknown"}function Se(e){let t=e.creationOptions?.shellPath;if(t)return be(t);let r=process.env.SHELL;return r?be(r):process.platform==="win32"?"powershell":"unknown"}function et(e,t){switch(t){case"fish":return"'"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";case"powershell":return'"'+e.replace(/`/g,"``").replace(/\$/g,"`$").replace(/"/g,'`"')+'"';case"cmd":return'"'+e.replace(/%/g,"%%").replace(/"/g,'""')+'"';case"bash":case"zsh":case"unknown":default:return"'"+e.replace(/'/g,"'\\''")+"'"}}function Q(e){let t=A.window.activeTerminal;if(!t){A.window.showErrorMessage("Terminal Image Paste: No active terminal. Please open a terminal first.");return}let r=Se(t),o=et(e,r),n=A.workspace.getConfiguration("terminalImgPaste").get("sendNewline",!1);t.sendText(o,n),l.info(`Inserted path into terminal (${r}): ${o}`)}var O=d(require("fs")),xe=d(require("os")),Z=d(require("path"));async function Ce(e,t,r,o){if(r==="auto"||t===r)return{data:e,format:t};try{return{data:await rt(e,t,r,o),format:r}}catch(a){return l.warn(`Image conversion from ${t} to ${r} failed, saving in native format: ${a instanceof Error?a.message:String(a)}`),{data:e,format:t}}}async function tt(e){if(e.os==="macos")return"sips";if(e.os==="windows"||e.isWSL)return e.powershellPath?"powershell":null;try{return await m("which",["convert"]),"magick"}catch{}try{return await m("which",["ffmpeg"]),"ffmpeg"}catch{}return null}async function rt(e,t,r,o){let a=await tt(o);if(a===null)throw new Error("No conversion tool available");switch(a){case"sips":return ot(e,r);case"magick":return at(e,t,r);case"ffmpeg":return nt(e,r);case"powershell":return st(e,r,o.powershellPath)}}async function ot(e,t){let r=xe.tmpdir(),o=Z.join(r,`tip-convert-in-${Date.now()}`),a=t==="jpeg"?"jpg":"png",n=Z.join(r,`tip-convert-out-${Date.now()}.${a}`);await _(o,e);try{return await m("sips",["--setProperty","format",t==="jpeg"?"jpeg":"png",o,"--out",n]),await O.promises.readFile(n)}finally{await O.promises.unlink(o).catch(()=>{}),await O.promises.unlink(n).catch(()=>{})}}async function at(e,t,r){let o=`${t}:-`,a=`${r}:-`;return(await u("convert",[o,a],{input:e})).stdout}async function nt(e,t){return(await u("ffmpeg",["-hide_banner","-loglevel","error","-f","image2pipe","-i","-","-f","image2","-c:v",t==="png"?"png":"mjpeg","-"],{input:e})).stdout}async function st(e,t,r){return(await u(r,["-NoProfile","-EncodedCommand",b(`
Add-Type -AssemblyName System.Drawing
$stdin = [Console]::OpenStandardInput()
$ms = New-Object System.IO.MemoryStream
$stdin.CopyTo($ms)
$ms.Position = 0
$img = [System.Drawing.Image]::FromStream($ms)
$outMs = New-Object System.IO.MemoryStream
$img.Save($outMs, [System.Drawing.Imaging.ImageFormat]::${t==="png"?"Png":"Jpeg"})
[Console]::OpenStandardOutput().Write($outMs.ToArray(), 0, $outMs.Length)
$img.Dispose()
$ms.Dispose()
$outMs.Dispose()
`)],{input:e})).stdout}var L=class{_queue=[];_locked=!1;acquire(){return new Promise(t=>{let r=()=>{this._locked?this._queue.push(r):(this._locked=!0,t(()=>{this._locked=!1;let o=this._queue.shift();o&&o()}))};r()})}};function Ie(e,t){let r=t instanceof Error?t.message:String(t);f.window.showErrorMessage(`Terminal Image Paste: ${r}`),l.error(`${e} command failed`,t)}function it(e){let t=ne(),r=ue(t),o=ve();r.isToolAvailable().then(s=>{s||f.window.showWarningMessage(`Terminal Image Paste: clipboard tool "${r.requiredTool()}" not found. Install it to use clipboard image pasting.`)}).catch(s=>{l.error("Failed to check tool availability",s)});let a=new L,n=f.commands.registerCommand("terminalImgPaste.pasteImage",async()=>{let s=await a.acquire();try{if(!await r.isToolAvailable()){f.window.showWarningMessage(`Terminal Image Paste: "${r.requiredTool()}" is not installed. Please install it to paste clipboard images.`);return}let h=f.workspace.getConfiguration("terminalImgPaste");if(h.get("warnOnRemote",!0)){let ee=ie();if(ee.remote&&ee.type!=="wsl"&&await f.window.showWarningMessage("Clipboard images are saved locally. The pasted path may not be accessible from the remote terminal.","Paste Anyway","Cancel")!=="Paste Anyway")return}if(!await r.hasImage()){f.window.showInformationMessage("No image found in clipboard.");return}let{data:g,format:C}=await r.readImage(),p=h.get("saveFormat","auto"),I=await Ce(g,C,p,t),Te=await o.save(I.data,I.format);Q(Te),f.window.setStatusBarMessage("Image pasted to terminal",3e3)}catch(c){Ie("pasteImage",c)}finally{s()}}),i=f.commands.registerCommand("terminalImgPaste.sendPathToTerminal",async s=>{try{if(!s?.fsPath){f.window.showErrorMessage("Terminal Image Paste: No file selected.");return}Q(s.fsPath),f.window.setStatusBarMessage("Path sent to terminal",3e3)}catch(c){Ie("sendPathToTerminal",c)}});e.subscriptions.push(n,i),l.info(`Extension activated (platform: ${t.os}, WSL: ${t.isWSL})`)}function lt(){l.info("Extension deactivating")}0&&(module.exports={activate,deactivate});
//# sourceMappingURL=extension.js.map
